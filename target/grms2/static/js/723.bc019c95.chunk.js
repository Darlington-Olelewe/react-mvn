(self.webpackChunkgrms=self.webpackChunkgrms||[]).push([[723],{3723:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return b}});var t=s(885),c=s(2791),i=s(7487),l=s(9434),a=s(2134),r={main:"AppUsers_main__ErAFW",controls:"AppUsers_controls__UwQAT",pp:"AppUsers_pp__ybeM9",table:"AppUsers_table__NqjfP"},d=s(4942),o=s(1413),u={main:"Employee_main__i3RPJ",form__group:"Employee_form__group__0w7oz",left:"Employee_left__Xw0j6",btns:"Employee_btns__Uc7b9"},h="Modal_modal__SZYHl",m="Modal_overlay__-V05F",p="Modal_modal__content__WAvJ4",f=s(184),x=function(e){var n=(0,c.useState)({dateOfExpiration:null,dateOfProcurement:null,durationWindowInWeeks:null,licenseName:null,price:null}),s=(0,t.Z)(n,2),l=s[0],a=s[1],r=(0,c.useState)([]),x=(0,t.Z)(r,2),j=x[0],v=x[1],_=(0,c.useState)(!0),b=(0,t.Z)(_,2),N=b[0],g=b[1],w=(0,c.useState)(),y=(0,t.Z)(w,2),C=y[0],S=y[1];(0,c.useEffect)((function(){i.Z.fetchLicenseNames().then((function(e){var n=e.data;n.unshift({id:0,licenseName:"---select---"}),console.log(n),v(n)}))}),[]);var k=function(e){var n=e.target,s=n.name,t=n.value;a((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,d.Z)({},s,t))}))};return(0,f.jsxs)("div",{children:[!N&&(0,f.jsxs)("div",{className:h,children:[(0,f.jsx)("div",{onClick:function(){g(!N)},className:m}),(0,f.jsxs)("form",{onSubmit:function(n){n.preventDefault(),i.Z.createStationLicence(l).then((function(n){if(g(!0),200===n.status){var s=new FormData;s.append("file",C),i.Z.attachDocument(s,n.data.id).then((function(n){200===n.status?(e.onSendMsg("success"),g(!0)):e.onSendMsg("unsuccessful")}))}else e.onSendMsg("unsuccessful")})).catch((function(n){g(!0),e.onSendMsg("unsuccessful")}))},className:p,children:[(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:u.form__group,children:[(0,f.jsx)("div",{className:u.left,children:(0,f.jsx)("label",{children:"License Name"})}),(0,f.jsx)("div",{className:u.right,children:(0,f.jsx)("select",{name:"licenseName",onChange:k,required:!0,type:"text",children:j.map((function(e,n){return(0,f.jsx)("option",{value:e.licenseName,children:e.licenseName},n)}))})})]}),(0,f.jsxs)("div",{className:u.form__group,children:[(0,f.jsx)("div",{className:u.left,children:(0,f.jsx)("label",{children:"Procurement Date"})}),(0,f.jsx)("div",{className:u.right,children:(0,f.jsx)("input",{type:"date",required:!0,name:"dateOfProcurement",onChange:k})})]}),(0,f.jsxs)("div",{className:u.form__group,children:[(0,f.jsx)("div",{className:u.left,children:(0,f.jsx)("label",{children:"Expiration Date"})}),(0,f.jsx)("div",{className:u.right,children:(0,f.jsx)("input",{type:"date",required:!0,name:"dateOfExpiration",onChange:k})})]}),(0,f.jsxs)("div",{className:u.form__group,children:[(0,f.jsx)("div",{className:u.left,children:(0,f.jsx)("label",{children:"Price"})}),(0,f.jsx)("div",{className:u.right,children:(0,f.jsx)("input",{name:"price",onChange:k,required:!0,type:"number"})})]}),(0,f.jsxs)("div",{className:u.form__group,children:[(0,f.jsx)("div",{className:u.left,children:(0,f.jsx)("label",{children:"Renewal Period"})}),(0,f.jsx)("div",{className:u.right,children:(0,f.jsx)("input",{name:"durationWindowInWeeks",onChange:k,required:!0,type:"number"})})]}),(0,f.jsxs)("div",{className:u.form__group,children:[(0,f.jsx)("div",{className:u.left,children:(0,f.jsx)("label",{children:"License Document"})}),(0,f.jsx)("div",{className:u.right,children:(0,f.jsx)("input",{type:"file",name:"file",required:!0,onChange:function(e){S(e.target.files[0])},accept:".doc, .docx, .pdf"})})]})]}),(0,f.jsx)("div",{className:u.form__group,children:(0,f.jsxs)("div",{children:[(0,f.jsx)("button",{className:"btn btn-danger",onClick:function(){g(!N)},children:"Close "}),(0,f.jsx)("button",{className:"btn btn-success",type:"submit",children:"Apply"})]})})]})]}),N&&(0,f.jsx)("div",{children:(0,f.jsx)("button",{className:"btn btn-success",onClick:function(){g(!N)},children:"New License "})})]})},j=s(9353),v=s.n(j),_=function(e){return(0,f.jsx)("div",{children:(0,f.jsxs)("table",{className:"table table-striped container",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{scope:"col",children:"id"}),(0,f.jsx)("th",{scope:"col",children:"licenseName"}),(0,f.jsx)("th",{scope:"col",children:"price"}),(0,f.jsx)("th",{scope:"col",children:"renewal period"}),(0,f.jsx)("th",{scope:"col",children:"Procurment"}),(0,f.jsx)("th",{scope:"col",children:"Expiration"}),(0,f.jsx)("th",{scope:"col",children:"Download"}),(0,f.jsx)("th",{scope:"col",children:"Update"})]})}),(0,f.jsx)("tbody",{children:e.all.map((function(e){return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{children:e.id}),(0,f.jsx)("td",{children:e.licenseName}),(0,f.jsx)("td",{children:e.price}),(0,f.jsxs)("td",{children:[e.durationWindowInWeeks," weeks"]}),(0,f.jsx)("td",{children:e.dateOfProcurement}),(0,f.jsx)("td",{children:e.dateOfExpiration}),(0,f.jsx)("td",{children:(0,f.jsx)("button",{className:"btn btn-success",onClick:function(){return n=e.id,s=e.docName,void i.Z.downloadDocument(n).then((function(e){v()(e.data,s)}));var n,s},children:"Download"})}),(0,f.jsx)("td",{children:(0,f.jsx)("button",{className:"btn btn-success",children:"update"})})]},e.id)}))})]})})},b=function(){var e=(0,l.v9)((function(e){return e.user})),n=(0,c.useState)(""),s=(0,t.Z)(n,2),d=s[0],o=s[1],u=(0,c.useState)([]),h=(0,t.Z)(u,2),m=h[0],p=h[1],j=["dateOfExpiration","dateOfProcurement","licenseName","price"],v=(0,c.useState)(1),b=(0,t.Z)(v,2),N=b[0],g=b[1],w=(0,c.useState)(10),y=(0,t.Z)(w,2),C=y[0],S=y[1],k=(0,c.useState)(null),Z=(0,t.Z)(k,2),L=Z[0],U=Z[1];(0,c.useEffect)((function(){i.Z.fetchStationLicenses(e.depotId).then((function(e){p(e.data),console.log(e.data)}))}),[L]);var E=function(e){U(e)},O=N*C,M=O-C,R=m.filter((function(e){return j.some((function(n){return e[n].toLowerCase().includes(d)}))})),A=R.slice(M,O);return(0,f.jsxs)("div",{className:r.main,children:[(0,f.jsxs)("div",{className:r.controls,children:[(0,f.jsxs)("div",{className:r.controls__left,children:[(0,f.jsx)("input",{className:r.pp,type:"number",value:C,onChange:function(e){return S(e.target.value)}}),(0,f.jsx)("input",{type:"text",placeholder:"search....",onChange:function(e){return o(e.target.value)}})]}),!L&&(0,f.jsx)("div",{className:"alert alert-success",children:L}),(0,f.jsx)(x,{onSendMsg:E}),(0,f.jsxs)("div",{className:r.controls__right,children:[(0,f.jsx)(a.FtK,{onClick:function(){1!==N&&g(N-1)}}),(0,f.jsx)("span",{children:N+" OF "+Math.ceil(R.length/C)}),(0,f.jsx)(a.rYR,{onClick:function(){N!==Math.ceil(R.length/C)&&g(N+1)}})]})]}),(0,f.jsx)("div",{className:r.table,children:(0,f.jsx)(_,{all:A,onGetMsg:E})})]})}},9353:function(e){e.exports=function(e,n,s,t){var c=new Blob("undefined"!==typeof t?[t,e]:[e],{type:s||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(c,n);else{var i=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(c):window.webkitURL.createObjectURL(c),l=document.createElement("a");l.style.display="none",l.href=i,l.setAttribute("download",n),"undefined"===typeof l.download&&l.setAttribute("target","_blank"),document.body.appendChild(l),l.click(),setTimeout((function(){document.body.removeChild(l),window.URL.revokeObjectURL(i)}),200)}}}}]);
//# sourceMappingURL=723.bc019c95.chunk.js.map